(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{175:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),s=t(59),r=t.n(s),o=(t(74),t(5)),l=t(1),m=t(2),i=new(function(){function e(){Object(l.a)(this,e),this._baseUrl="https://frontend-take-home.fetchrewards.com/form",this._headers={"Content-Type":"application/json"}}return Object(m.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getFormOptions",value:function(){var e=this;return fetch("".concat(this._baseUrl),{headers:this._headers}).then(function(a){return e._getResponseData(a)})}},{key:"postNewUser",value:function(e){var a=this,t=e.name,n=e.email,c=e.password,s=e.occupation,r=e.state;return fetch("".concat(this._baseUrl),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,email:n,password:c,occupation:s,state:r})}).then(function(e){return a._getResponseData(e)})}}]),e}());var u=function(e){var a=e.isOpen,t=e.onClose,s=e.status;return Object(n.useEffect)(function(){var e=function(e){27===e.keyCode&&t()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[]),c.a.createElement("div",{className:a?"modal__background":"modal__hidden",onClick:t},c.a.createElement("div",{className:"modal__container"},c.a.createElement("button",{className:"modal__close-button",type:"button","aria-label":"close",onClick:t}),"success"===s?c.a.createElement("div",{className:"modal__success_container"},c.a.createElement("p",{className:"modal__success-message"},"Account successfully created!"),c.a.createElement("div",{className:"modal__icon success-icon"})):"fail"===s?c.a.createElement("div",{className:"modal__fail_container"},c.a.createElement("div",{className:"modal__text-container"},c.a.createElement("p",{className:"modal__message"},"An error occured."),c.a.createElement("p",{className:"modal__sub-message"},"Please try again.")),c.a.createElement("div",{className:"fail-icon modal__icon "})):"load"===s?c.a.createElement("div",{className:"modal__load-error_container"},c.a.createElement("div",{className:"modal__load-error_text"},c.a.createElement("p",{className:"modal__message"},"Couldn't load all necessary resources."),c.a.createElement("p",{className:"modal__sub-message"},"Please try reloading your browser.")),c.a.createElement("div",{className:"fail-icon modal__icon "})):void 0))};var d=function(){return c.a.createElement("footer",{className:"footer"},c.a.createElement("div",{className:"footer__content"},c.a.createElement("p",{className:"copyright"},"Jake Johnson \xa9 2022"),c.a.createElement("div",{className:"credits"},c.a.createElement("div",{className:"credit__item"},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cssgradient.io/",className:"credit__link"},"CSS Gradients"),c.a.createElement("p",{className:"credit__text"},"Used to create all gradients on this site.")),c.a.createElement("div",{className:"credit__item"},c.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://www.flaticon.com/free-icon/bad-feedback_5362991?term=ui%20sad%20emoji&page=1&position=69&page=1&position=69&related_id=5362991&origin=search",className:"credit__link"},"Sad Icon"),c.a.createElement("p",{className:"credit__text"},"Icon used on error tooltip.")),c.a.createElement("div",{className:"credit__item"},c.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://www.flaticon.com/free-icon/success_1656126?related_id=1656126&origin=search",className:"credit__link"},"Success Icon"),c.a.createElement("p",{className:"credit__text"},"Icon used on successful api request tooltip.")))))};var _=function(){return c.a.createElement("header",{className:"heading"},c.a.createElement("p",{className:"subtitle"},"New here?"),c.a.createElement("h2",{className:"title"},"Create an account"),c.a.createElement("hr",{className:"heading_underline"}))},f=t(4),p=t(13),E=p.a().shape({name:p.b().required("You must enter your name."),email:p.b().email("Email must be valid.").required("You must enter your email."),password:p.b().min(8).required("You must enter a password."),occupation:p.b().required("You must select an occupation."),state:p.b().required("You must select your state.")});var b=function(e){var a=e.occupations,t=e.states,n=e.onCreateUserSubmit;return c.a.createElement("div",{className:"form__container"},c.a.createElement(f.d,{initialValues:{name:"",email:"",password:"",occupation:"",state:""},onSubmit:function(e,a){var t=a.resetForm;n(e),t()},validationSchema:E},function(e){var n=e.isValid;return c.a.createElement(f.c,{className:"form"},c.a.createElement("fieldset",{className:"fieldset"},c.a.createElement("div",{className:"form__item_content"},c.a.createElement(f.b,{placeholder:"Full Name",className:"form-field",name:"name",type:"text"}),c.a.createElement(f.a,{className:"form__error",component:"span",name:"name"})),c.a.createElement("div",{className:"form__item_content"},c.a.createElement(f.b,{placeholder:"Email",className:"form-field",name:"email",type:"email"}),c.a.createElement(f.a,{className:"form__error",component:"span",name:"email"})),c.a.createElement("div",{className:"form__item_content"},c.a.createElement(f.b,{placeholder:"Password",className:"form-field",name:"password",type:"password"}),c.a.createElement(f.a,{className:"form__error",component:"span",name:"password"})),c.a.createElement("div",{className:"form__item_content"},c.a.createElement(f.b,{className:"form-field select",as:"select",name:"occupation",defaultValue:""},c.a.createElement("option",{selected:"selected",disabled:!0,value:""},"Select your occupation"),a.map(function(e,a){return c.a.createElement("option",{key:a},e)})),c.a.createElement(f.a,{className:"form__error",component:"span",name:"occupation"})),c.a.createElement("div",{className:"form__item_content"},c.a.createElement(f.b,{className:"form-field select",as:"select",name:"state",defaultValue:""},c.a.createElement("option",{selected:"selected",disabled:!0,value:""},"Select your State"),t.map(function(e,a){return c.a.createElement("option",{key:a,className:"state"},Object.values(e).join(", "))})),c.a.createElement(f.a,{className:"form__error",component:"span",name:"state"}))),c.a.createElement("button",{className:"submit__button ".concat(n?"submit__button_valid":"")},c.a.createElement("span",{className:"".concat(n?"submit__button_icon":"")}),c.a.createElement("span",{className:"".concat(n?"submit__button_background":"")}),c.a.createElement("span",{className:"submit__button_text ".concat(n?"submit__button_valid":"submit__invalid")},"Create account")))}))};var N=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],s=a[1],r=Object(n.useState)([]),l=Object(o.a)(r,2),m=l[0],f=l[1],p=Object(n.useState)(!1),E=Object(o.a)(p,2),N=E[0],h=E[1],v=Object(n.useState)(""),g=Object(o.a)(v,2),w=g[0],y=g[1];return Object(n.useEffect)(function(){i.getFormOptions().then(function(e){h(!1),s(e.occupations),f(e.states)}).catch(function(){return y("load")},h(!0))},[]),c.a.createElement("main",{className:"page"},c.a.createElement(_,null),c.a.createElement(b,{occupations:t,states:m,onCreateUserSubmit:function(e){i.postNewUser(e).then(function(){return y("success")}).catch(function(){return y("fail")}).finally(function(){return h(!0)})}}),c.a.createElement(d,null),c.a.createElement(u,{status:w,isOpen:N,onClose:function(){h(!1)}}))},h=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,176)).then(function(a){var t=a.getCLS,n=a.getFID,c=a.getFCP,s=a.getLCP,r=a.getTTFB;t(e),n(e),c(e),s(e),r(e)})};r.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(N,null))),h()},65:function(e,a,t){e.exports=t(175)},74:function(e,a,t){}},[[65,1,2]]]);
//# sourceMappingURL=main.10f9a2e4.chunk.js.map